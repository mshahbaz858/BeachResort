{"ast":null,"code":"import _objectSpread from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\DEVELOPMENT\\\\react-project\\\\resort\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component,Children}from'react';import items from'./data';import RoomsContainer from'./components/RoomContainer';var RoomContext=React.createContext();var RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);function RoomProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RoomProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:'all',capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,breakfast:false,pets:false};_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=event.target.name;_this.setState(_defineProperty({},name,value),_this.filterRooms);};_this.filterRooms=function(){// here we used let so we can override the value of it\nvar _this$state=_this.state,rooms=_this$state.rooms,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,minSize=_this$state.minSize,maxSize=_this$state.maxSize,breakfast=_this$state.breakfast,pets=_this$state.pets;//all the value \nvar tempRooms=_toConsumableArray(rooms);//transform value\ncapacity=parseInt(capacity);price=parseInt(price);//filter by ('min and max Size')\ntempRooms=tempRooms.filter(function(room){return room.size>=minSize&&room.size<=maxSize;});//filter by ('breakfast')\nif(breakfast){tempRooms=tempRooms.filter(function(room){return room.breakfast===true;});}//filter by ('pets')\nif(pets){tempRooms=tempRooms.filter(function(room){return room.pets===true;});}//filter by ('type') \nif(type!=='all'){tempRooms=tempRooms.filter(function(room){return room.type===type;});}// filter by ('capacity')\nif(capacity!==1){tempRooms=tempRooms.filter(function(room){return room.capacity>=capacity;});}//filter by price \ntempRooms=tempRooms.filter(function(room){return room.price<=price;});//change state\n_this.setState({sortedRooms:tempRooms});};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){var rooms=this.formatData(items);var featuredRooms=rooms.filter(function(room){return room.featured===true;});var maxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));var maxSize=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.size;})));this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,maxPrice:maxPrice,maxSize:maxSize});}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});var room=_objectSpread({},item.fields,{id:id,images:images});return room;});return tempItems;}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(RoomContext.Provider,{value:_objectSpread({},this.state,{getRoom:this.getRoom,handleChange:this.handleChange})},this.props.children));}}]);return RoomProvider;}(Component);var RoomConsumer=RoomContext.Consumer;export function withRoomConsumer(Component){return function ConsumerWrapper(props){return React.createElement(RoomConsumer,null,function(value){return React.createElement(Component,Object.assign({},props,{context:value}));});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"sources":["E:/DEVELOPMENT/react-project/resort/src/context.js"],"names":["React","Component","Children","items","RoomsContainer","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","getRoom","slug","tempRooms","room","find","handleChange","event","target","value","checked","name","setState","filterRooms","parseInt","filter","size","formatData","featured","Math","max","map","item","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"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","sourcesContent":["import React, { Component, Children } from 'react'\r\nimport items from './data'\r\nimport RoomsContainer from './components/RoomContainer';\r\nconst RoomContext = React.createContext();\r\nclass RoomProvider extends Component {\r\n    state = {\r\n        rooms: [],\r\n        sortedRooms: [],\r\n        featuredRooms: [],\r\n        loading: true,\r\n        type: 'all',\r\n        capacity: 1,\r\n        price: 0,\r\n        minPrice: 0,                                                        \r\n        maxPrice: 0,\r\n        minSize: 0,\r\n        maxSize: 0,\r\n        breakfast: false,\r\n        pets: false\r\n    };\r\n\r\n    componentDidMount() {\r\n        let rooms = this.formatData(items)\r\n        let featuredRooms = rooms.filter(room => room.featured === true);\r\n\r\n        let maxPrice = Math.max(...rooms.map(item => item.price));\r\n        let maxSize = Math.max(...rooms.map(item => item.size));\r\n\r\n        this.setState({\r\n            rooms,\r\n            featuredRooms,\r\n            sortedRooms: rooms,\r\n            loading: false,\r\n            price: maxPrice,\r\n            maxPrice,\r\n            maxSize\r\n        });\r\n    }\r\n    formatData(items) {\r\n        let tempItems = items.map(item => {\r\n            let id = item.sys.id;\r\n            let images = item.fields.images.map(image => image.fields.file.url);\r\n            let room = { ...item.fields, id, images }\r\n            return room;\r\n        });\r\n        return tempItems;\r\n\r\n    }\r\n\r\n    getRoom = (slug) => {\r\n        let tempRooms = [...this.state.rooms];\r\n        const room = tempRooms.find(room => room.slug === slug);\r\n        return room;\r\n    };\r\n\r\n    handleChange = event => {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = event.target.name\r\n        this.setState(\r\n            {\r\n                [name]: value\r\n            },\r\n            this.filterRooms\r\n        );\r\n    }\r\n    filterRooms = () => {\r\n        // here we used let so we can override the value of it\r\n        let {\r\n            rooms,\r\n            type,\r\n            capacity,\r\n            price,\r\n            minSize,\r\n            maxSize,\r\n            breakfast,\r\n            pets\r\n        } = this.state;\r\n        //all the value \r\n        let tempRooms = [...rooms];\r\n        \r\n        //transform value\r\n        capacity = parseInt(capacity);\r\n        price=parseInt(price);\r\n\r\n        //filter by ('min and max Size')\r\n        tempRooms= tempRooms.filter(room=> room.size\r\n             >= minSize && room.size<=maxSize)\r\n\r\n        //filter by ('breakfast')\r\n        if(breakfast){\r\n            tempRooms=tempRooms.filter(room=> room.breakfast===true)\r\n        }\r\n\r\n        //filter by ('pets')\r\n        if(pets){\r\n            tempRooms=tempRooms.filter(room=> room.pets===true)\r\n        }\r\n\r\n        //filter by ('type') \r\n        if (type !== 'all') {\r\n            tempRooms = tempRooms.filter(room => room.type === type);\r\n        }\r\n\r\n        // filter by ('capacity')\r\n        if (capacity !== 1){\r\n            tempRooms = tempRooms.filter(room=> room.capacity>=capacity);\r\n        }\r\n        //filter by price \r\n        tempRooms = tempRooms.filter(room=>{\r\n           return room.price <= price\r\n        });\r\n\r\n        //change state\r\n        this.setState({\r\n            sortedRooms: tempRooms\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <RoomContext.Provider\r\n                    value={{\r\n                        ...this.state,\r\n                        getRoom: this.getRoom,\r\n                        handleChange: this.handleChange\r\n                    }}\r\n                >\r\n                    {this.props.children}\r\n                </RoomContext.Provider>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst RoomConsumer = RoomContext.Consumer;\r\n\r\nexport function withRoomConsumer(Component) {\r\n    return function ConsumerWrapper(props) {\r\n        return <RoomConsumer>\r\n            {\r\n                value =>\r\n                    <Component {...props}\r\n                        context={value} />\r\n            }\r\n        </RoomConsumer>\r\n    }\r\n\r\n}\r\nexport { RoomProvider, RoomConsumer, RoomContext };"]},"metadata":{},"sourceType":"module"}